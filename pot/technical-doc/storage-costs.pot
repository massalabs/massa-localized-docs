# SOME DESCRIPTIVE TITLE.
# Copyright (C) 2022, Massa Labs
# This file is distributed under the same license as the Massa Localized Docs package.
# FIRST AUTHOR <EMAIL@ADDRESS>, YEAR.
#
#, fuzzy
msgid ""
msgstr ""
"Project-Id-Version: Massa Localized Docs \n"
"Report-Msgid-Bugs-To: \n"
"POT-Creation-Date: 2023-04-21 00:47+0000\n"
"PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n"
"Last-Translator: FULL NAME <EMAIL@ADDRESS>\n"
"Language-Team: LANGUAGE <LL@li.org>\n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"

#: ../../technical-doc/storage-costs.rst:6
#: 372156d3dff24d7abe555cda81d7291a
msgid "Storage Costs"
msgstr ""

#: ../../technical-doc/storage-costs.rst:9
#: 13344944093d4af982a7d89f41daeacb
msgid "Explanations"
msgstr ""

#: ../../technical-doc/storage-costs.rst:11
#: b7adf0e620764ad098b6ad8e4514a77f
msgid "In Massa the ledger is shared across all nodes of the network. We need to set a size limit to be able to run a node without having 100TB of storage which will cause a barrier for adoption and running nodes at home. We chose to limit the size to 1TB. Everyone can store data until the ledger reach 1TB. But how can we ensure this limit ?"
msgstr ""

#: ../../technical-doc/storage-costs.rst:15
#: b1a851716d2547e080ea0cc8f7d12e6a
msgid "We chose to force users to lock coins when they claim storage space and so we created a correlation with storage and circulating coins."
msgstr ""

#: ../../technical-doc/storage-costs.rst:18
#: 2a69468f3021484581c1219b7ff207e6
msgid "For each byte of storage you claim (for your address and balance, a key in your datastore, bytecode, ...) you need to lock coins. The coins are released when you release your space in the storage."
msgstr ""

#: ../../technical-doc/storage-costs.rst:21
#: ee1b2f92aff646b386f5e9aa7f2accf3
msgid "The amount of coins you need to lock for one byte is 0.00025 Massa. This value has been chosen so that if half of the coins (250 000 000 Massa) are locked, we will reach the 1TB."
msgstr ""

#: ../../technical-doc/storage-costs.rst:24
#: 1fe62545b4ac45598ff0acdd38add23d
msgid "As balances are stored as `varint <https://developers.google.com/protocol-buffers/docs/encoding#varints>`__ in the ledger their size can vary. To avoid difficulties and incomprehension we decided to use a fixed size for each balance. This size is 8 bytes and so initial ledger entry (address + balance) cost (8 + 32) * 0.00025 = 0.01 Massa . Datastore keys also have a variable size and so we decided to use a fixed size of 10 bytes for calculating storage cost."
msgstr ""

#: ../../technical-doc/storage-costs.rst:29
#: ec24e9f9a6ed4c1dbae26b1d2bead453
msgid "If you want to calculate the storage cost of your address in the ledger the formula is: address_size + balance_constant + bytecode_length + sum of (constants datastore key + value size) = 32 + 8 + bytecode.len() + sum_i(10 + datastore[i].len())) * 0.00025"
msgstr ""

#: ../../technical-doc/storage-costs.rst:33
#: 4f0cde2460614d78aee71a69bc569c9e
msgid "The storage costs are always paid by the address that calls the ABI. For instance, if you are using the ABI `set_bytecode` or `set_bycode_for` you will be charged for the storage costs."
msgstr ""

#: ../../technical-doc/storage-costs.rst:37
#: 51e30524074f45b59361caa56cc019a0
msgid "Example"
msgstr ""

#: ../../technical-doc/storage-costs.rst:39
#: cdbf5fedf79d4acb8ec4ca3822577e4b
msgid "To create your address on the blockchain someone need to send at least 0.00025 * (32 + 8) = 0.01 Massa when sending the operation that will create your address (a transfer for example). This is the cost of creating your address and balance."
msgstr ""

#: ../../technical-doc/storage-costs.rst:42
#: 9e7867dda30242f69a80e1078c68fd36
msgid "You want to store your birth date that is 30 bytes long in your datastore so you need to send an operation that will create a key in your datastore using a SC. This operation will cost you in storage costs at least 0.00025 * (10 + 30) = 0.01 Massa."
msgstr ""

#: ../../technical-doc/storage-costs.rst:46
#: 5d25b310447f46f9821b87663ca6d48e
msgid "So when creating a fresh new wallet using `massa-client`, you can generate it with `wallet_generate_secret_key`, and check its address using `wallet_info`, however as long as you don't receive a transfer of at least `0.01 Massa`, this address won't appear anywhere in the ledgers of the blockchain."
msgstr ""

#: ../../technical-doc/storage-costs.rst:51
#: 1c065c157d80475caaad03914292d843
msgid "If you receive a transfer of `0.005 Massa` the operation will fail, and if you receive a transfer of `10 Massa`, you will see on your balance only `9.99 Massa` available."
msgstr ""

#: ../../technical-doc/storage-costs.rst:54
#: 01b730d72b994a31a64f560f2635bfdf
msgid "Now you want to delete this entry on your datastore you will be refunded of the storage costs (0.02 Massa)."
msgstr ""

#: ../../technical-doc/storage-costs.rst:57
#: 523a8b8f19db4f7f99e8193b446d7bd2
msgid "Notes"
msgstr ""

#: ../../technical-doc/storage-costs.rst:59
#: 1969d089af314e6dbd01403342401960
msgid "In case of refund of the storage costs, after realeasing space, the address reimbursed is the one that calls the ABI, possibly different from the one that paid for this storage."
msgstr ""

#: ../../technical-doc/storage-costs.rst:62
#: f0b4bfb0eac0484794ff752ffa7f9dd0
msgid "In the case of a `CallSC` operation, the storage costs are paid by the SC."
msgstr ""

#: ../../technical-doc/storage-costs.rst:64
#: 15705f143e074465ae8e7e146239a66a
msgid "If you are a SC developer and you want your users to pay for the storage costs of your smart contract you can use the coins that are passed by the `coins` parameter of CallSC. You can also save their address in your datastore in order to refund them later."
msgstr ""
